<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp" />
  
  <meta name="author" content="Inno">
  
  <meta name="description" content="innoçš„ä¸ªäººåšå®¢ç½‘ç«™ï¼Œå…³æ³¨Javascriptï¼ŒGolangï¼ŒNodejsï¼ŒDenoï¼Œå¾®ä¿¡å°ç¨‹åºç­‰webå¼€å‘å¸¸ç”¨æŠ€æœ¯ã€‚">
  
  <meta name="keywords" content="leetcode,golang,javascript,typescript,deno,nodejs,ç®—æ³•,å‰ç«¯,åç«¯">
  
  
  <link rel="prev" href="https://blog.innoweb.cn/2020/21/" />
  
  <link rel="next" href="https://blog.innoweb.cn/2020/22/" />
  <link rel="canonical" href="https://blog.innoweb.cn/2020/20/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link href="/favicon.ico" rel="icon" type="image/x-icon">
  <link href="https://blog.innoweb.cn/favicon.ico" rel="icon" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
    
    
    JavaScriptæ¨¡å—åŒ–-AMD | Inno`s Blog
    
  </title>
  <meta name="title"
    content="JavaScriptæ¨¡å—åŒ–-AMD | Inno`s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/blog.innoweb.cn\/"
    },
    "articleSection" : "posts",
    "name" : "JavaScriptæ¨¡å—åŒ–-AMD",
    "headline" : "JavaScriptæ¨¡å—åŒ–-AMD",
    "description" : "JavaScriptæ¨¡å—åŒ–-AMDè§„èŒƒå’ŒReuqireJsä½¿ç”¨",
    "inLanguage" : "zh-CN",
    "author" : "Inno",
    "creator" : "Inno",
    "publisher": "Inno",
    "accountablePerson" : "Inno",
    "copyrightHolder" : "Inno",
    "copyrightYear" : "2020",
    "datePublished": "2020-07-02 23:44:17 \x2b0800 CST",
    "dateModified" : "2020-07-02 23:44:17 \x2b0800 CST",
    "url" : "https:\/\/blog.innoweb.cn\/2020\/20\/",
    "wordCount" : "2351",
    "keywords" : [ "javascript","æ¨¡å—åŒ–","requirejs","AMD", "Inno`s Blog"]
}
</script>

</head>




<body class="">
  <div class="wrapper">
    <nav class="navbar">
    
        <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://blog.innoweb.cn/">Inno`s Blog</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/github/" title="innoâ€ ">Inno ğŸ´</a>
                
        </div>
        
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
    <div class="top-scroll-bar"></div>
    
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://blog.innoweb.cn/">Inno`s Blog</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/github/" title="innoâ€ ">Inno ğŸ´</a>
                
        </div>
    </div>
</nav>
    <main class="main">
      <div class="container">
        
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">JavaScriptæ¨¡å—åŒ–-AMD</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://blog.innoweb.cn/" rel="author">Inno</a> with â™¥ 
                <span class="post-time">
                on <time datetime=2020-07-02 itemprop="datePublished">July 2, 2020</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://blog.innoweb.cn/categories/javascript/"> javascript </a>
                        
                </span>
                <span class="post-word-count" style="float: right;">Total <code>2351</code> words</span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <p>æœ€è¿‘å†™ä¸€ä¸ªå°æ¸¸æˆçš„æ—¶å€™ç”¨çš„æ˜¯<code>RequireJs</code>æ„å»ºé¡¹ç›®ï¼Œé¡ºä¾¿è¡¥äº†ä¸€ä¸‹<code>RequireJs</code>ï¼Œä¸‹é¢è®²è§£ä¸€äº›åŸºç¡€å’Œè¿›é˜¶çš„ç”¨æ³•ã€‚</p>
<p><img src="http://image.innoweb.cn/2020-07-02-154317.png" alt="image-20200702234124624"></p>
<h2 id="amd">AMD</h2>
<p><a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD</a><code>Async Module Definition</code>ä»£è¡¨çš„æ„æ€ä¸ºå¼‚æ­¥æ¨¡å—å®šä¹‰ï¼Œæ˜¯<code>Javascript</code>æ¨¡å—åŒ–çš„æµè§ˆå™¨è§£å†³æ–¹æ¡ˆï¼Œå®ƒé‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“å®ƒåé¢è¯­å¥çš„è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚</p>
<p><img src="http://image.innoweb.cn/2020-07-02-154840.png" alt="image-20200702233814576"></p>
<p><a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD</a>è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°<code>define</code>ï¼Œé€šè¿‡<code>define</code>æ–¹æ³•å®šä¹‰æ¨¡å—ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"> <span style="color:#a6e22e">define</span>(<span style="color:#a6e22e">id</span><span style="color:#f92672">?</span>, <span style="color:#a6e22e">dependencies</span><span style="color:#f92672">?</span>, <span style="color:#a6e22e">factory</span>);
</code></pre></div><p>å¹¶ä¸”é‡‡ç”¨<code>require()</code>è¯­å¥åŠ è½½æ¨¡å—ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">require</span>([<span style="color:#a6e22e">module</span>], <span style="color:#a6e22e">callback</span>);
</code></pre></div><p>å¼•å…¥çš„æ¨¡å—å’Œå›è°ƒå‡½æ•°ä¸æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¸ä¼šå› ä¸ºå¼•å…¥çš„æ¨¡å—åŠ è½½ä¸æˆåŠŸè€Œå‡æ­»ã€‚</p>
<h2 id="requirejs">RequireJS</h2>
<p><code>RequireJS</code>æ˜¯ä¸€ä¸ªåŸºäº<code>AMD</code>è§„èŒƒå®ç°çš„<code>JavaScript</code>æ–‡ä»¶å’Œæ¨¡å—åŠ è½½å™¨ã€‚å®ƒé’ˆå¯¹æµè§ˆå™¨å†…ä½¿ç”¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¹¶ä¸”å¯¹å…¶ä»–<code>JS</code>ç¯å¢ƒ<code>(Rhinoå’ŒNode)</code>åšäº†å…¼å®¹ã€‚ä½¿ç”¨<code>RequireJS</code>è¿™æ ·çš„æ¨¡å—åŒ–è„šæœ¬åŠ è½½å™¨å¯ä»¥æé«˜ä»£ç çš„é€Ÿåº¦å’Œè´¨é‡ã€‚</p>
<ul>
<li>**å¼‚æ­¥åŠ è½½ï¼š**ä½¿ç”¨ <strong>RequireJS</strong>ï¼Œä¼šåœ¨ç›¸å…³çš„ <strong>js</strong> åŠ è½½åæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥å®ƒä¸ä¼šé˜»å¡é¡µé¢ã€‚</li>
<li>**æŒ‰éœ€åŠ è½½ï¼š**é€šè¿‡ <strong>RequireJS</strong>ï¼Œä½ å¯ä»¥åœ¨éœ€è¦åŠ è½½ <strong>js</strong> é€»è¾‘çš„æ—¶å€™å†åŠ è½½å¯¹åº”çš„ <strong>js</strong> æ¨¡å—ï¼Œä¸éœ€è¦çš„æ¨¡å—å°±ä¸åŠ è½½ï¼Œè¿™æ ·é¿å…äº†åœ¨åˆå§‹åŒ–ç½‘é¡µçš„æ—¶å€™å‘ç”Ÿå¤§é‡çš„è¯·æ±‚å’Œæ•°æ®ä¼ è¾“ã€‚</li>
</ul>
<h3 id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</h3>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£å’Œé¡¹ç›®å®ä¾‹ï¼Œæ¥ä¸‹æ¥è¯´ä¸€ä¸‹<code>ReuqireJS</code>çš„åŸºæœ¬ä½¿ç”¨ï¼š</p>
<h4 id="reuqire-download">Reuqire Download</h4>
<p>ä¸‹è½½æœ€æ–°ç‰ˆçš„<a href="https://requirejs.org/docs/download.html">RequireJS</a>ã€‚</p>
<h4 id="project-structure">Project Structure</h4>
<p>ä¸‹é¢æ˜¯å®˜æ–¹ç¤ºä¾‹çš„<code>RequireJS</code>é¡¹ç›®ç»“æ„ï¼Œå¯¹å†…å®¹åšäº†å°å°çš„æ”¹åŠ¨ï¼Œ<code>www</code>ä½œä¸ºé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œ<code>lib</code>ä¸­å­˜æ”¾é¡¹ç›®ä¾èµ–å³éœ€è¦çš„ä¸€äº›<code>JS</code>åº“ï¼Œ<code>app.js</code>ä¸ºä¸»å…¥å£æ–‡ä»¶ï¼Œ<code>app</code>ä¸­å­˜æ”¾è‡ªå·±å†™çš„æ¨¡å—æ–‡ä»¶ã€‚</p>
<p><img src="http://image.innoweb.cn/2020-07-02-152321.png" alt="image-20200702194455250"></p>
<h4 id="project-code">Project Code</h4>
<p><strong>1. index.html</strong></p>
<p><code>index.html</code>ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>script</code>æ ‡ç­¾æ¥å¼•å…¥<code>require.js</code>ï¼Œå…¶ä¸­<code>data-main</code>å±æ€§æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å®šåœ¨åŠ è½½å®Œ <code>reuqire.js</code> åï¼Œå°±å°†å±æ€§æŒ‡å®šè·¯å¾„ä¸‹çš„<code>JS</code>æ–‡ä»¶å¹¶è¿è¡Œï¼Œè¿™ä¸ªæ–‡ä»¶å³å…¥å£æ–‡ä»¶ï¼Œè¿™é‡Œçš„<code>app.js</code>çš„<code>js</code>åç¼€è¢«çœç•¥æ‰äº†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span>&gt;
    &lt;<span style="color:#f92672">head</span>&gt;
        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">data-main</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lib/require.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
    &lt;/<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">body</span>&gt;
        &lt;<span style="color:#f92672">h1</span>&gt;Hello World&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><blockquote>
<p>å¦‚æœ <strong><code>&lt;script/&gt;</code></strong> æ ‡ç­¾å¼•å…¥ <strong>require.js</strong> æ—¶æ²¡æœ‰æŒ‡å®š <strong>data-main</strong> å±æ€§ï¼Œåˆ™ä»¥å¼•å…¥è¯¥ <strong>js</strong> çš„ <strong>html</strong> æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ä¸ºæ ¹è·¯å¾„ï¼Œå¦‚æœæœ‰æŒ‡å®š <strong>data-main</strong> å±æ€§ï¼Œä¹Ÿå°±æ˜¯æœ‰æŒ‡å®šå…¥å£æ–‡ä»¶ï¼Œåˆ™ä»¥å…¥å£æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ä¸ºæ ¹è·¯å¾„ã€‚</p>
</blockquote>
<p><strong>2. app.js</strong></p>
<p><code>Main.js</code>åŠ è½½ä¸»æ¨¡å—å¹¶ä¸”é…ç½®é¡¹ç›®ä¾èµ–ï¼Œè¦æ”¹å˜ <code>RequireJS</code>çš„é»˜è®¤é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨<code>require.config</code>å‡½æ•°ä¼ å…¥ä¸€ä¸ªå¯é€‰å‚æ•°å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¯ä»¥ä½¿ç”¨çš„é…ç½®ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// For any third party dependencies, like jQuery, place them in the lib folder.
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// Configure loading modules from the lib directory,
</span><span style="color:#75715e"></span><span style="color:#75715e">// except for &#39;app&#39; ones, which are in a sibling
</span><span style="color:#75715e"></span><span style="color:#75715e">// directory.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">requirejs</span>.<span style="color:#a6e22e">config</span>({
  <span style="color:#75715e">// æ¨¡å—åŠ è½½çš„æ ¹è·¯å¾„ã€‚
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">baseUrl</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;.&#34;</span>,
 	<span style="color:#75715e">// ç”¨äºä¸€äº›å¸¸ç”¨åº“æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹è·¯å¾„æ˜ å°„ï¼Œjsåç¼€å¯ä»¥çœç•¥
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">paths</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">app</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;app/&#34;</span>,
    <span style="color:#a6e22e">fmt</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;lib/fmt&#34;</span>,
  },
});

<span style="color:#75715e">// Start loading the main app file. Put all of
</span><span style="color:#75715e"></span><span style="color:#75715e">// your application logic in there.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">requirejs</span>([<span style="color:#e6db74">&#34;app/main&#34;</span>]);

</code></pre></div><blockquote>
<p>å¦‚æœåœ¨ <strong>require.config()</strong> ä¸­æœ‰é…ç½® <strong>baseUrl</strong>ï¼Œåˆ™ä»¥ <strong>baseUrl</strong> çš„è·¯å¾„ä¸ºæ ¹è·¯å¾„ï¼Œè¿™æ¡è§„åˆ™ä¼šè¦†ç›–ä¸Šé¢<code>data-main</code>çš„æ•ˆæœã€‚</p>
</blockquote>
<p><strong>3. app/</strong></p>
<p><code>Main.js</code>ä¸­æˆ‘ä»¬é€šè¿‡<code>require</code>å‡½æ•°åŠ è½½äº†ä¸€ä¸ª<code>message</code>æ¨¡å—ï¼Œè¯¥æ¨¡å—ç”¨äºæ‰“å°ä¸€äº›å®šä¹‰å¥½çš„å­—ç¬¦ä¸²ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">require</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">msg</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;./message&#34;</span>);
  <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">helloWorld</span>();
});
</code></pre></div><p><code>Main.js</code>ä¸­ä½¿ç”¨çš„æ¨¡å—å®šä¹‰åœ¨<code>message.js</code>ä¸­ï¼Œä»–å¼•å…¥äº†ä¸€ä¸ªè¾“å‡ºä¾èµ–<code>fmt</code>ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>([<span style="color:#e6db74">&#34;fmt&#34;</span>], <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">fmt</span>) {
  <span style="color:#66d9ef">return</span> {
    <span style="color:#a6e22e">helloWorld</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;hello word&#34;</span>);
    },
  };
});
</code></pre></div><blockquote>
<p>è¿™ä¸¤ç§ä¾èµ–çš„åŠ è½½æ–¹å¼åˆå’Œä¸åŒç¨åä»‹ç»ã€‚</p>
</blockquote>
<p><strong>4. lib/</strong></p>
<p><code>Lib/fmt.js</code>ä¸­æˆ‘å®šä¹‰ä¸€ä¸ª <code>js</code> æ¨¡å—æ¨¡æ‹Ÿ<code>go</code>çš„<code>fmt</code>åŒ…ï¼Œé€šè¿‡<code>return</code>å¯¹å¤–æš´éœ²å‡ºæ¥å£ã€‚æ³¨æ„ï¼Œæš´éœ²çš„å¯¹è±¡å°±æ˜¯å¼•å…¥çš„å¯¹è±¡ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>(<span style="color:#66d9ef">function</span> () {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">print</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">msg</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">msg</span>);
  };
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">println</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">msg</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>);
  };

  <span style="color:#66d9ef">return</span> {
    <span style="color:#a6e22e">moduleName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;fmt&#34;</span>,
    <span style="color:#a6e22e">print</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">print</span>,
    <span style="color:#a6e22e">println</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">println</span>,
  };
});
</code></pre></div><h3 id="requireconfig-å‡½æ•°é…ç½®">require.config å‡½æ•°é…ç½®</h3>
<p>è¦æ”¹å˜<code>RequireJS</code>çš„é»˜è®¤é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨<code>require.config</code>å‡½æ•°ä¼ å…¥ä¸€ä¸ªå¯é€‰å‚æ•°å¯¹è±¡ï¼Œå…¶å®è¿™ä¸ªå¯¹è±¡å¯ä»¥é…ç½®äº”ä¸ªå±æ€§ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">config</span>({
    <span style="color:#a6e22e">baseUrl</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;.&#39;</span>,
  	<span style="color:#a6e22e">paths</span><span style="color:#f92672">:</span> {
    	<span style="color:#a6e22e">app</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;app/&#34;</span>,
    	<span style="color:#a6e22e">fmt</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;lib/fmt&#34;</span>,
  	},
    <span style="color:#a6e22e">shim</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#39;backbone&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#a6e22e">deps</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;underscore&#39;</span>, <span style="color:#e6db74">&#39;jquery&#39;</span>],
            <span style="color:#a6e22e">exports</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Backbone&#39;</span>
        },
        <span style="color:#e6db74">&#39;underscore&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#a6e22e">exports</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;_&#39;</span>
        }
    },
    <span style="color:#a6e22e">config</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#39;app/main&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#a6e22e">ENV</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;development&#39;</span>
        }
    },
     <span style="color:#a6e22e">map</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#39;script/newmodule&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#39;foo&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;foo1.2&#39;</span>
        },
        <span style="color:#e6db74">&#39;script/oldmodule&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#39;foo&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;foo1.0&#39;</span>
        }
    },
});
</code></pre></div><p><strong>1. baseUrl</strong></p>
<p><code>baseUrl</code>ä½œä¸ºåŠ è½½æ¨¡å—çš„æ ¹è·¯å¾„ã€‚åœ¨é…ç½®è¿™ä¸ªå±æ€§åï¼Œä¹‹åæ‰€æœ‰çš„è·¯å¾„å®šä¹‰éƒ½æ˜¯åŸºäºè¿™ä¸ªæ ¹è·¯å¾„çš„ï¼ˆåŒ…æ‹¬é…ç½®å’Œä¾èµ–å¼•å…¥ä¸­ï¼‰ã€‚</p>
<p><strong>2. path</strong></p>
<p>ç”¨äºä¸€äº›å¸¸ç”¨åº“æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹è·¯å¾„æ˜ å°„ï¼Œå®šä¹‰ä¹‹åå¯ä»¥ç›´æ¥åœ¨ä¾èµ–å¼•å…¥ä¸­ä½¿ç”¨ã€‚</p>
<p><strong>3. shim</strong></p>
<p>è™½ç„¶ç›®å‰å·²ç»æœ‰ä¸€éƒ¨åˆ†æµè¡Œçš„å‡½æ•°åº“ç¬¦åˆ <strong>AMD</strong> è§„èŒƒï¼Œä½†è¿˜æœ‰å¾ˆå¤šåº“å¹¶ä¸ç¬¦åˆã€‚<code>shim</code>å°±æ˜¯ä¸ºäº†åŠ è½½è¿™äº›é<code>AMD</code>è§„èŒƒçš„<code>js</code>ï¼Œå¹¶è§£å†³å…¶è½½å…¥é¡ºåºçš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„<code>backbone</code>ã€‚</p>
<p><strong>4. config</strong></p>
<p><code>config</code>å°†é…ç½®ä¿¡æ¯ä¼ ç»™ä¸€ä¸ªæ¨¡å—ã€‚è¿™äº›é…ç½®å¾€å¾€æ˜¯<code>application</code>çº§åˆ«çš„ä¿¡æ¯ï¼Œéœ€è¦ä¸€ä¸ªæ‰‹æ®µå°†å®ƒä»¬å‘ä¸‹ä¼ é€’ç»™æ¨¡å—ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">config</span><span style="color:#f92672">:</span> {
  <span style="color:#e6db74">&#39;app/main&#39;</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">ENV</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;development&#39;</span>
  }
}
</code></pre></div><p>å¯ä»¥é€šè¿‡åŠ è½½ç‰¹æ®Šçš„ä¾èµ–<code>module</code>æ¥è·å–è¿™äº›ä¿¡æ¯ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>([<span style="color:#e6db74">&#39;module&#39;</span>], <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">module</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ENV</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">config</span>().<span style="color:#a6e22e">ENV</span>;  <span style="color:#75715e">// development
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">msg</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;./message&#34;</span>);
  <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">helloWorld</span>();
});
</code></pre></div><p><strong>5. map</strong></p>
<p>å¯¹äºç»™å®šçš„æ¨¡å—å‰ç¼€ï¼Œä½¿ç”¨ä¸€ä¸ªä¸åŒçš„æ¨¡å— <strong>ID</strong> æ¥åŠ è½½è¯¥æ¨¡å—ã€‚è¯¥æ‰‹æ®µå¯¹äºæŸäº›å¤§å‹é¡¹ç›®å¾ˆé‡è¦ã€‚æ¯”å¦‚ä¸Šé¢é…ç½®ä»¥åï¼Œä¸åŒçš„æ¨¡å—ä¼šä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„<code>foo</code>ã€‚</p>
<p>å½“<code>some/newmodule</code>è°ƒç”¨äº†<code>require('foo')</code>ï¼Œå®ƒå°†è·å–åˆ°<code>foo1.2.js</code>æ–‡ä»¶ï¼Œå½“<code>oldmodule</code>è°ƒç”¨ <code>require('foo')</code>ï¼Œæ—¶å®ƒå°†è·å–åˆ° <code>foo1.0.js</code> æ–‡ä»¶ã€‚</p>
<p><code>map</code>è¿˜æ”¯æŒ<code>*</code>ï¼Œæ„æ€æ˜¯â€œå¯¹äºæ‰€æœ‰çš„æ¨¡å—åŠ è½½ï¼Œä½¿ç”¨æœ¬ <code>map</code> é…ç½®â€ã€‚å¦‚æœè¿˜æœ‰æ›´ç»†åŒ–çš„ <code>map</code> é…ç½®ï¼Œä¼šä¼˜å…ˆäº<code>*</code>é…ç½®ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">requirejs</span>.<span style="color:#a6e22e">config</span>({
    <span style="color:#a6e22e">map</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#39;foo&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;foo1.2&#39;</span>
        },
        <span style="color:#e6db74">&#39;some/oldmodule&#39;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#39;foo&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;foo1.0&#39;</span>
        }
    }
});
</code></pre></div><h3 id="æ¨¡å—å®šä¹‰">æ¨¡å—å®šä¹‰</h3>
<p><strong>1. å¯¹è±¡</strong></p>
<p>å¦‚æœä¸€ä¸ªæ¨¡å—ä»…å«é”®å€¼å¯¹ï¼Œæ²¡æœ‰ä»»ä½•ä¾èµ–ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>define</code>ä¸­å®šä¹‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>({
    <span style="color:#a6e22e">foo</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;foo&#34;</span>,
    <span style="color:#a6e22e">bar</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(){}
});
</code></pre></div><p><strong>2. éœ€è¦é¢„å¤„ç†çš„å¯¹è±¡</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>(<span style="color:#66d9ef">function</span> () {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Do something...&#34;</span>);
 
    <span style="color:#66d9ef">return</span> {
    	<span style="color:#a6e22e">foo</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;foo&#34;</span>,
    	<span style="color:#a6e22e">bar</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(){}
    }
});
</code></pre></div><p><strong>3. åªæœ‰ä¸€ä¸ªå‡½æ•°</strong></p>
<p>æ²¡æœ‰ä»»ä½•ä¾èµ–çš„å‡½æ•°ç›´æ¥è¿™ä¹ˆå®šä¹‰ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>(<span style="color:#66d9ef">function</span> () {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (){};
});
</code></pre></div><p>è°ƒç”¨æ—¶ç›´æ¥æ‰“<code>()</code>è°ƒç”¨ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">require</span>([<span style="color:#e6db74">&#39;lib/foo&#39;</span>],<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">foo</span>) {
    <span style="color:#a6e22e">foo</span>();
});
</code></pre></div><p><strong>4. éœ€è¦å…¶ä»–çš„ä¾èµ–ï¼š</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">define</span>([<span style="color:#e6db74">&#39;jquery&#39;</span>],<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">$</span>){
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (){};
});
</code></pre></div><h3 id="å¾ªç¯åŠ è½½">å¾ªç¯åŠ è½½</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ <code>aã€b</code> ä¸¤ä¸ªäº’ç›¸ä¾èµ–çš„æ¨¡å—ï¼Œæˆ‘ä»¬å¦‚æœè°ƒç”¨ <code>b</code> æ¨¡å—çš„ <code>b</code> æ–¹æ³•ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// app/a.js
</span><span style="color:#75715e"></span><span style="color:#a6e22e">define</span>([<span style="color:#e6db74">&#39;app/b&#39;</span>],<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">b</span>){
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>() { <span style="color:#a6e22e">b</span>() }
});

<span style="color:#75715e">// app/b.js
</span><span style="color:#75715e"></span><span style="color:#a6e22e">define</span>([<span style="color:#e6db74">&#39;app/a&#39;</span>],<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">a</span>){
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>() { <span style="color:#a6e22e">a</span>() }
});
</code></pre></div><p>ä¼šå‘ç° <code>b</code> è°ƒç”¨ <code>a</code> æ­£å¸¸ï¼Œä½†æ˜¯ <code>a</code> ä¸­è°ƒç”¨ <code>b</code> æ–¹æ³•ä¼šæŠ¥ <code>undefined</code> é”™è¯¯ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">require</span>([<span style="color:#e6db74">&#39;app/b&#39;</span>],<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">b</span>) {
    <span style="color:#a6e22e">b</span>();	<span style="color:#75715e">// b is not defined.
</span><span style="color:#75715e"></span>});
</code></pre></div><p><strong>è§£å†³ï¼š</strong></p>
<p>å¾ªç¯ä¾èµ–æ¯”è¾ƒç½•è§ï¼Œå¯¹äºå¾ªç¯ä¾èµ–ï¼Œåªè¦ä¾èµ–ç¯ä¸­ä»»ä½•ä¸€æ¡è¾¹æ˜¯è¿è¡Œæ—¶ä¾èµ–ï¼Œè¿™ä¸ªç¯ç†è®ºä¸Šå°±æ˜¯æ´»çš„ã€‚è€Œå¦‚æœå…¨éƒ¨è¾¹éƒ½æ˜¯è£…è½½æ—¶ä¾èµ–ï¼Œè¿™ä¸ªç¯å°±æ˜¯æ­»çš„ã€‚</p>
<p>å¯¹æ¨¡å— <code>a</code> è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼Œå³ä¸å†ä¾èµ–å‰ç½®åŠ è½½ã€‚è€Œæ˜¯é€šè¿‡å¼•å…¥ <code>require</code> ä¾èµ–ï¼Œç„¶åå†é€šè¿‡ <code>require()</code> æ–¹æ³•å»è½½å…¥æ¨¡å— <code>b</code>ï¼Œå¹¶åœ¨å›è°ƒä¸­å»æ‰§è¡Œã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// app/a.js
</span><span style="color:#75715e"></span><span style="color:#a6e22e">define</span>([<span style="color:#e6db74">&#39;require&#39;</span>],<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">require</span>){
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;b&#39;</span>)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>() {
      <span style="color:#a6e22e">b</span>()
    }
});
</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Inno </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://blog.innoweb.cn/2020/20/>https://blog.innoweb.cn/2020/20/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://blog.innoweb.cn/tags/javascript/">
                    #javascript</a></span>
            
            <span class="tag"><a href="https://blog.innoweb.cn/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/">
                    #æ¨¡å—åŒ–</a></span>
            
            <span class="tag"><a href="https://blog.innoweb.cn/tags/requirejs/">
                    #requirejs</a></span>
            
            <span class="tag"><a href="https://blog.innoweb.cn/tags/AMD/">
                    #AMD</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://blog.innoweb.cn/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://blog.innoweb.cn/2020/21/" class="prev" rel="prev" title="Linuxç³»ç»ŸæœåŠ¡"><i class="iconfont icon-left"></i>&nbsp;Linuxç³»ç»ŸæœåŠ¡</a>
         
        
        <a href="https://blog.innoweb.cn/2020/22/" class="next" rel="next" title="ç”¨denoæ¥å¿«é€Ÿè¿è¡Œtsä»£ç ">ç”¨denoæ¥å¿«é€Ÿè¿è¡Œtsä»£ç &nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
          
<div id="gitalk-container" style="border: 0;"></div>
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/gitalk/1.6.2/gitalk.css" style="border: 0;" />
<script src="https://cdn.bootcdn.net/ajax/libs/gitalk/1.6.2/gitalk.js" style="border: 0;"></script>
<script>
  const gitalk = new Gitalk({
    clientID: "29ea93a56bc68af65ba8",
    clientSecret: "0af554128f5f5ec8a81b515d4df19b6238170fd4",
    repo: "patrick-prod.github.io",
    owner: "patrick-prod",
    admin: ["patrick-prod"],
    id: location.pathname, 
    distractionFreeMode: false, 
  });
  (function () {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById("gitalk-container").innerHTML =
        "Gitalk comments not available by default when the website is previewed locally.";
      return;
    }
    gitalk.render("gitalk-container");
  })();
</script>

    </div>
</article>
      </div>
    </main>
    <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2020 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://blog.innoweb.cn/">Inno</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>














    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  





  </div>
</body>

</html>